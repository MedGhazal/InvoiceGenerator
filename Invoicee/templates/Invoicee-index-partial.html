{% load i18n %}
<h1>{% translate 'INVOICEE' %}</h1>
{% if messages %}
<div class="messages-content">
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}{% translate 'Error' %}: {% endif %}
            {{ message }}
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}
<div class="filter-form-wrapper">
    <form 
        hx-push-url="true" 
        hx-get=
        {% if private %}
        "{% url 'Invoicee:pinvoicees' %}" 
        {% else %}
        "{% url 'Invoicee:invoicees' %}" 
        {% endif %}
        hx-swap="innerHTML" 
        hx-target="main" 
        class="filter-form">
        <div class="form-main">
            <h2>{% translate "EnterNameToSearchForInvoicee" %}</h2>
            {% csrf_token %}
            {{ searchForm }}
        </div>
        <div class="form-footer">
            <button class="submit-button" type="submit">{% translate "ApplyFilter" %}</button>
        </div>
    </form>
</div>
<div class="item-list">
    {% if invoicee_list %}
    <table>
        <thead>
            <tr>
                {% if hasMultipleInvoicers %}
                <th>{% translate 'INVOICER' %}</th>
                {% endif %}
                <th>{% translate 'Name' %}</th>
                <th>{% translate 'Address' %}</th>
                {% if private %}
                <th>{% translate 'CIN' %}</th>
                {% else %}
                <th>{% translate 'ICE' %}</th>
                {% endif %}
                <th>{% translate 'OutStandingAmount' %}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                {% for invoicee in invoicee_list %}
                {% include './Invoicee-list-item.html' with invoicee=invoicee %}
                {% endfor %}
            </tr>
        </tbody>
    </table>
    {% endif %}
    <div class="item-list-footer">
        {% if private %}
        <button 
            hx-indicator="#indicator"
            hx-get="{% url 'Invoicee:add-private-invoicee' %}" class="MainItem"
            hx-target="#invoicee-form-dialog"
            hx-on:click="document.getElementById('invoicee-form-dialog').showModal();"
            hx-swap="innerHTML"
        >{% translate 'AddPrivateInvoicee' %}</button>
        {% else %}
        <button 
            hx-indicator="#indicator"
            hx-get="{% url 'Invoicee:add-invoicee' %}" class="MainItem"
            hx-target="#invoicee-form-dialog"
            hx-on:click="document.getElementById('invoicee-form-dialog').showModal();"
            hx-swap="innerHTML"
        >{% translate 'AddInvoicee' %}</button>
        {% endif %}
    </div>
</div>
